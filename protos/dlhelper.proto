syntax = "proto3";

package x;
option go_package = "github.com/5vnetwork/vx-core/app/configs";

// SocketConfig is options to be applied on network sockets.
message SocketConfig {
  // Mark of the connection. If non-zero, the value will be set to SO_MARK.
  uint32 mark = 1;

  enum TCPFastOpenState {
    // AsIs is to leave the current TFO state as is, unmodified.
    AsIs = 0;
    // Enable is for enabling TFO explictly.
    Enable = 1;
    // Disable is for disabling TFO explictly.
    Disable = 2;
  }

  // TFO is the state of TFO settings.
  TCPFastOpenState tfo = 2;

  enum TProxyMode {
    // TProxy is off.
    Off = 0;
    // TProxy mode.
    TProxy = 1;
    // Redirect mode.
    Redirect = 2;
  }

  // TProxy is for enabling TProxy socket option.
  TProxyMode tproxy = 3;

  // ReceiveOriginalDestAddress is for enabling IP_RECVORIGDSTADDR socket
  // option. This option is for UDP only.
  bool receive_original_dest_address = 4;

  // BindAddress is the address to bind to. Determines local address of the
  // socket. Linux only.
  bytes bind_address = 5;
  uint32 bind_port = 6;

  bool accept_proxy_protocol = 7;

  int32 tcp_keep_alive_interval = 8;

  uint32 tfo_queue_length = 9;

  int32 tcp_keep_alive_idle = 10;
  // Determines the nic device to bind to.
  uint32 bind_to_device = 11;

  int64 rx_buf_size = 12;
  int64 tx_buf_size = 13;
  bool force_buf_size = 14;
  // For dial, local addr is the LocalAddr of the net.Dialer
  // For udp packetConn, local addr is listening address
  // In V2ray, this is the Via property of a outbound handler
  string local_addr4 = 16;
  string local_addr6 = 17;
    uint32 dial_timeout = 18;

}
